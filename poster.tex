\documentclass{tikzposter}

% \settitle{\vbox{
%      \color{titlefgcolor} {\bfseries \Huge \sc \@title \par}
%      \vspace*{1em}
%      {\LARGE \@author \par} \vspace*{1em} {\large \@institute}
% }}

\makeatletter
\renewcommand\TP@maketitle{%
   \begin{minipage}{0.8\linewidth}
        \color{titlefgcolor}
        {\bfseries \Huge \sc \@title \par}
        \vspace*{1em}
        {\huge \@author \par}
        \vspace*{1em}
        {\LARGE \@institute}
    \end{minipage}
    \hfill
    \begin{minipage}{0.2\linewidth}
       \centering
       \includegraphics[width=16cm]{uoa}
    \end{minipage}
}
\makeatother

\title{Efficient Bayesian Evolutionary Analysis using Hamiltonian Monte Carlo}
\author{\textbf{Arman Bilge}, Tim Vaughan, and Alexei J. Drummond}
\institute{email: \texttt{armanbilge@gmail.com}}

\usetheme{Autumn}
\usecolorstyle{Russia}
\renewcommand{\familydefault}{\sfdefault}
\usepackage{sfmath}

% Surface plot
\usepackage{pgfplots}
\pgfplotsset{width=30cm,compat=newest}

\usepackage{mathtools}
\newcommand{\dd}{\, \mathrm{d}}
\renewcommand{\vec}[1]{\ensuremath{\boldsymbol{\mathbf{#1}}}}
\newcommand{\mat}[1]{\ensuremath{\boldsymbol{\mathbf{#1}}}}
\newcommand{\op}[1]{\ensuremath{\boldsymbol{\mathbf{#1}}}}
\newcommand{\norm}[1]{\ensuremath{\mathcal{N}\left(#1\right)}}

\usepackage{algorithm}
\usepackage{algpseudocode}

\begin{document}

    \maketitle

    \begin{columns}

        \column{0.5}

        \block{Hamiltonian Dynamics}{
            Let $\pi\left(\vec{q}\right) \equiv P\left(\vec{\theta}\mid\vec{D}\right)$ be the target probability density.

            Consider a particle with position $\vec{q}$ and momentum $\vec{p}$.

            Then the Hamiltonian for our system is
            \begin{equation}
                H\left(\vec{q},\vec{p}\right) = U\left(\vec{q}\right) + K\left(\vec{p}\right)
            \end{equation}
            with potential energy
            \begin{equation}
                U\left(\vec{q}\right) = -\log{\pi\left(\vec{q}\right)}
            \end{equation}
            and kinetic energy
            \begin{equation}
                K\left(\vec{p}\right) = \frac{1}{2} \vec{p}^T \mat{M} \vec{p}
            \end{equation}
            where $\mat{M}$ represents the particle's mass.

            The system's dynamics are described by Hamilton's equations
            \begin{equation}
                \frac{\dd \vec{q}}{\dd t} = \frac{\partial H}{\partial \vec{p}},
            \end{equation}
            and
            \begin{equation}
                \frac{\dd \vec{p}}{\dd t} = -\frac{\partial H}{\partial \vec{q}},
            \end{equation}
            which are integrated to find the state at a particular time.
        }

        \block{The HMC Algorithm}{

            \innerblock{Flip Operator}{
                text text
            }

            \innerblock{Leapfrog Operator}{
                text text
            }

            \innerblock{Momentum Randomization Operator}{
                text text
            }

            \begin{algorithmic}[1]
            \Function {HamiltonUpdate}{$\left\{\vec{q},\vec{p}\right\}$}
                \State $\left\{\vec{q}^\prime, \vec{p}^\prime\right\}
                    \leftarrow \op{F}\op{L}\left\{\vec{q},\vec{p}\right\}$
                \State $a \leftarrow \min\left(1,
                    \exp\left(
                        H\left(\vec{q}, \vec{p}\right) - H\left(\vec{q}^\prime,
                            \vec{p}^\prime\right)\right)\right)$
                \State $\left\{\vec{q},\vec{p}\right\} \leftarrow
                    \begin{cases}
                        \left\{\vec{q}^\prime, \vec{p}^\prime\right\}
                            & \text{with probability } a \\
                        \left\{\vec{q},\vec{p}\right\}
                            & \text{with probability } 1 - a
                    \end{cases}$
                \State $\left\{\vec{q},\vec{p}\right\} \leftarrow
                            \op{R}\op{F}\left\{\vec{q},\vec{p}\right\}$
                \State \Return $\left\{\vec{q},\vec{p}\right\}$
            \EndFunction
            \end{algorithmic}
        }

        \block{Surface}{
            \begin{tikzfigure}[Caption?]
                \begin{tikzpicture}
                    \begin{axis}[colormap/greenyellow,
                                 view={40}{20},
                                 xlabel=$t_1$,
                                 ylabel=$t_2$,
                                 zlabel=$U\left(\vec{q}\right)$,
                                 zlabel style={rotate=-90},
                                 xtick={0,0.2,...,2},
                                 ytick={0,0.2,...,1},
                                 ztick={1000,1020,...,2000}
                                 ]
                        \addplot3[surf] table {surface.dat};
                        \addplot3 table {hmc.dat};
                        \addplot3 table {mcmc.dat};
                    \end{axis}
                \end{tikzpicture}
            \end{tikzfigure}
        }

        \column{0.5}

        \block{Acknowledgements}{
            SMBE Undergraduate Travel Award \\
            \includegraphics[width=10cm]{awc}
            \includegraphics[width=10cm]{nesi}
        }

    \end{columns}

\end{document}